# REA-181: Pre-push hooks - More comprehensive than pre-commit
# Runs typecheck and lint as blocking checks
# See pre-push.enhanced for full version with tests

echo "ğŸš€ Running pre-push validation..."

# 1. Type checking (catches type errors before they hit CI)
echo "ğŸ“ Type checking..."
pnpm run typecheck
if [ $? -ne 0 ]; then
  echo "âŒ TypeScript errors found. Fix them before pushing."
  exit 1
fi

# 2. Lint (catches common issues)
echo "ğŸ§¹ Linting..."
pnpm run lint
if [ $? -ne 0 ]; then
  echo "âŒ Linting errors found. Fix them before pushing."
  exit 1
fi

# 3. Prisma validation (ensures schema is valid)
echo "ğŸ—„ï¸  Validating Prisma schema..."
pnpm prisma validate
if [ $? -ne 0 ]; then
  echo "âŒ Prisma schema validation failed."
  exit 1
fi

echo "âœ… Pre-push checks passed!"
echo ""
echo "ğŸ’¡ CI will run full test suite with 80% pass rate threshold"
